# My Cloud Pro Max ☁️

一个基于 **Flask + Vue 3** 构建的轻量级、高性能个人私有云盘系统。
它不仅仅是一个文件管理器，更集成了**流式传输**、**在线影院**、**极客下载**和**智能资源管理**等 Pro 级功能。

---

## ✨ 核心特性 (Pro Max Highlights)

### 🚀 极致传输体验
* **极客流式下载 (Stream Download)**: 
    * 小文件 (<2GB) 使用 JS 流式管道传输，**在网页内直接显示实时网速和进度条**，支持选择保存路径 (File System Access API)。
    * 下载完成后自动清理服务器临时文件，零残留。
* **智能降级策略 (Smart Fallback)**:
    * 遇到 **>2GB** 的超大文件或不支持 API 的浏览器，自动无缝切换回**浏览器原生下载**，保证传输稳定性。
    * 利用 Linux Inode 特性，原生下载触发 10 秒后自动清理服务器临时文件，**边下边删**，不占服务器空间。
* **并发队列系统 (Task Queue)**:
    * 内置任务队列，限制最大并发数为 3。
    * **彻底解决卡顿**：无论拖入多少文件，页面操作（切换目录、刷新）永远丝滑流畅，不会被传输任务阻塞。

### 🎬 在线影音中心
* **沉浸式播放器**: 双击 MP4/WebM 等视频文件，直接弹出黑色全屏浮层播放，支持拖拽进度、音量调节。
* **分享页在线播**: 生成的分享链接支持**访客模式**。朋友打开链接不仅能下载，还能直接在网页上在线观看视频，无需下载。

### 🛡️ 安全与交互
* **防误触机制**: 当有上传/下载任务进行时，关闭或刷新网页会弹出浏览器级警告，防止传输中断。
* **全功能交互**: 
    * 全屏拖拽上传。
    * 右键上下文菜单 (下载、分享、移动、复制、重命名、删除)。
    * 双击智能判断 (进入文件夹 vs 播放视频 vs 下载文件)。
* **无感刷新**: 页面切换采用微型顶部加载条，数据加载完成后瞬间渲染，消除白屏等待感。

### ♻️ 完善的文件管理
* **回收站机制**: 支持软删除、一键还原、彻底删除和清空回收站。
* **智能分类**: 自动聚合图片、视频、文档、应用，方便快速查找。
* **分享管理**: 一键生成分享链接，支持查看下载次数和取消分享。

---

## 🛠️ 技术栈

* **后端**: Python 3, Flask (轻量级 Web 框架)
* **前端**: Vue.js 3 (CDN 引入), Tailwind CSS (样式), FontAwesome (图标)
* **数据存储**: 本地文件系统 + JSON 元数据 (无需配置 MySQL/Redis，开箱即用)

---

## ⚙️ 部署指南

### 1. 环境要求
* Python 3.8+
* Linux 服务器 (推荐 Ubuntu/Debian/CentOS) - *部分清理特性依赖 Linux Inode 机制*

### 2. 安装依赖
```bash
pip install flask
```

### 3. 项目结构
```bash
my-cloud-drive/
├── app.py              # 核心后端逻辑
├── tasks.py            # (可选) 异步任务处理
├── templates/          # 前端模板
│   ├── index.html      # 主控台 (Vue 3 + Pro Max 逻辑)
│   ├── share.html      # 访客分享页 (Jinja2 渲染)
│   └── login.html      # 登录页
├── storage/            # [自动生成] 文件存储区
├── trash/              # [自动生成] 回收站
└── shares/             # [自动生成] 分享数据
```

### 4. 启动服务

# 开发模式
python app.py

# 生产环境建议使用 Gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app

### 5. 账号配置

export ADMIN_USER="admin"
export ADMIN_PASS="your_secure_password"
export SECRET_KEY="your_random_secret_key"

### 📖 使用说明

登录: 访问 http://你的IP:5000/login。

上传: 直接将文件拖入网页，或点击右上角“上传”按钮。

下载:

单文件: 双击非视频文件，或右键选择下载。

批量: 勾选多个文件 -> 点击“下载”，服务器会自动打包。

分享: 选中文件 -> 点击“分享” -> 复制链接发给朋友。

播放: 双击视频文件即可在线观看。

### 📝 注意事项
视频格式: 在线播放依赖浏览器解码能力，支持 MP4 (H.264), WebM, Ogg。MKV/AVI 等格式建议下载后观看。

临时文件清理: 原生下载模式下，系统会在 10 秒后自动删除服务器上的临时压缩包。请勿在点击下载后 10 秒内立即关闭网页标签，否则可能导致清理请求未发送（虽然这对下载没有影响，只会残留垃圾文件）。


### 👨‍💻 作者
Project Developer: 小龙女她爸 Built with ❤️ for personal cloud storage efficiency.



bash <(curl -sSL https://raw.githubusercontent.com/SIJULY/Cloud-Drive/main/install.sh)
```

