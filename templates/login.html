<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Cloud Drive 登录</title>
    <link href="/static/css/tailwind.css" rel="stylesheet">
    <style>
        body { background-color: #f7f8fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .login-card { background: white; width: 400px; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        .input-field { background-color: #ffffff; border: 1px solid #e5e7eb; border-radius: 6px; padding: 12px 16px; width: 100%; outline: none; transition: all 0.2s; color: #374151; }
        .input-field:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
        .btn-primary { background-color: #2563eb; color: white; width: 100%; padding: 12px; border-radius: 6px; font-weight: 500; transition: background 0.2s; cursor: pointer; }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
        .footer-text { color: #6b7280; font-size: 13px; margin-top: 20px; }
    </style>
</head>
<body class="flex items-center justify-center h-screen">
    <div class="login-card text-center">
        <h1 class="text-2xl font-bold text-gray-800 mb-8">Cloud Drive</h1>
        <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-5">
            <div><input type="text" id="username" placeholder="请输入账号" class="input-field" required></div>
            <div><input type="password" id="password" placeholder="请输入密码" class="input-field" required></div>
            <button type="submit" class="btn-primary">验证登录</button>
        </form>
        <p class="footer-text">© Powered by 小龙女她爸</p>
    </div>
    <script>
        async function handleLogin(e) {
            e.preventDefault();
            const btn = document.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = '登录中...'; btn.disabled = true;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            try {
                const res = await fetch('/api/login', {
                    method: 'POST', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ username, password })
                });
                const data = await res.json();
                if (res.ok && data.status === 'success') { window.location.href = '/'; } 
                else { alert(data.message || '登录失败'); btn.innerText = originalText; btn.disabled = false; }
            } catch (err) { alert('网络错误'); btn.innerText = originalText; btn.disabled = false; }
        }
    </script>
</body>
</html>
